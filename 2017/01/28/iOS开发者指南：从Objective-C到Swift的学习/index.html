<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>iOS开发者指南：从objectivec到Swift的学习 | Kimi DevBlog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + '6a9ed51a920318450ff72d94cf2338aa';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
  </script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">iOS开发者指南：从objectivec到Swift的学习</h1><a id="logo" href="/.">Kimi DevBlog</a><p class="description">Whatever is worth doing is worth doing well.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined"> 首页</i></a><a href="/archives/"><i class="fa undefined"> 归档</i></a><a href="/categories/macapp"><i class="fa undefined"> Mac应用</i></a><a href="/categories/devtools"><i class="fa undefined"> 开发工具</i></a><a href="/categories/essay"><i class="fa undefined"> 随笔</i></a><a href="/categories/read"><i class="fa undefined"> 阅读</i></a><a href="/categories/"><i class="fa undefined"> 分类</i></a><a href="/leaveword/"><i class="fa undefined"> 留言</i></a><a href="/categories/resume"><i class="fa undefined"> 简历</i></a><a href="/about/"><i class="fa undefined"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">iOS开发者指南：从objectivec到Swift的学习</h1><div class="post-meta">Jan 28, 2017<span> | </span><span class="category"><a href="/categories/iOS/">iOS</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p>iOS开发者指南：从objectivec到Swift的学习【译】</p>
<p>原文 <a href="https://www.toptal.com/swift/from-objectivec-to-swift" target="_blank" rel="noopener">https://www.toptal.com/swift/from-objectivec-to-swift</a></p>
<p>​     2008年，苹果宣布并发布了iPhone SDK 2.0。这一事件又引发了软件开发的又一次革命，诞生了一批新的开发者。他们现在被认可为iOS开发者。</p>
<p>其中许多开发者以前从未使用过objectivec，这是苹果公司向他们提出的第一个挑战。尽管不熟悉的语法和手动内存管理，但它是非常成功的，帮助成千上万的应用程序上架到App Store。每个版本中，Apple都不断改进objectivec，添加代码块blocks和常量，通过自动引用计数简化内存管理，以及许多指示现代编程语言的其他功能。</p>
<p>​    经过6年对objectivec的改进和工作，苹果决定向开发者提出另一个挑战。 iOS开发者再一次需要学习一门新的编程语言：Swift。 Swift删除了不安全的指针管理，并引入了强大的新功能，同时保持与objectivec和C的交互。</p>
<p>​    Swift 1.0已经是一个稳定而强大的开发平台，在未来几年肯定会以有趣的方式发展。开始探索这个新语言是一个完美的时刻，因为它显然是iOS开发的未来。</p>
<p>本教程的目的是让objectivec开发人员快速了解新的Swift语言特性，帮助您进行下一步，并在日常工作中使用Swift。我不会花太多时间来解释objectivec，我将假定您熟悉iOS开发。</p>
<h4 id="尝试使用Swift-VS-objectivec"><a href="#尝试使用Swift-VS-objectivec" class="headerlink" title="尝试使用Swift VS objectivec"></a>尝试使用Swift VS objectivec</h4><p>为了开始探索Swift，你需要做的就是从App Store下载Xcode，创建一个小程序来实验。本文中提到的所有示例都是这样完成的。</p>
<p>苹果的Swift主页是学习Swift编程的最佳参考。你会发现它是非常宝贵的，直到你完全按照Swift的发展速度，我相信你会经常回到这里。</p>
<h4 id="变量和常量"><a href="#变量和常量" class="headerlink" title="变量和常量"></a>变量和常量</h4><p>在Swift中声明变量是使用var关键字完成的。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">"Hello"</span></span><br></pre></td></tr></table></figure>
<p>你会注意到两个变量x和s是不同的类型。 <code>x</code>是一个整数(Integer)，而<code>s</code>是一个字符串(String)。 Swift是一种类型安全的语言，它将从分配的值中推导出变量类型。如果你想让你的代码更具可读性，你可以选择注释变量的类型：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">y = <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>常量是相似的，但是用<code>let</code>而不是<code>var</code>声明它们。常量的值不需要在编译时知道，但是你必须给它赋值一次。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c1 = <span class="number">1</span>  <span class="comment">//在编译时已知的常量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> v = arc4random()</span><br><span class="line"><span class="keyword">let</span> c2 = v <span class="comment">// 只在运行时才知道的常量(Constant)</span></span><br></pre></td></tr></table></figure>
<p>顾名思义，它们是不可变的，所以下面的代码会导致编译时错误。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">c</span> = <span class="number">1</span></span><br><span class="line"><span class="built_in">c</span> = <span class="number">3</span>        <span class="comment">// error Connot assign to value:'c' is a 'let' constant</span></span><br></pre></td></tr></table></figure>
<p>其他类型也可以声明为常量。例如，下面的代码将数组声明为一个常量，如果您尝试修改任何元素，那么Swift编译器将报告一个错误：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">arr2[<span class="number">0</span>] = <span class="number">8</span></span><br><span class="line"><span class="built_in">print</span> (arr2)    <span class="comment">// [8, 5, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">5</span>    <span class="comment">// error Use of unresolved identifier 'a'</span></span><br></pre></td></tr></table></figure>
<h4 id="可选-Optionals-类型"><a href="#可选-Optionals-类型" class="headerlink" title="可选(Optionals)类型"></a>可选(Optionals)类型</h4><p>常量声明时需要初始化，变量需要在使用前初始化。 那么objectivec中<code>nil</code>等价在哪呢？ Swift引入了可选值。 可选的值可以有一个值或<code>nil</code>。 如果你看看下面的代码，你会注意到<code>x</code>被指定了一个2014的可选值。这意味着Swift编译器意识到x也可能是<code>nil</code>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"2014"</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="type">Int</span>(s)</span><br><span class="line"><span class="built_in">print</span>(x)    <span class="comment">// Optional(2014)</span></span><br></pre></td></tr></table></figure>
<p>如果你在这个代码中进行了修改，并且把值<code>“abc”</code>赋值给<code>s</code>，而这个值不能被转换成Integer，你会注意到<code>x</code>现在是<code>nil</code>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"abc"</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="type">Int</span>(s)</span><br><span class="line"><span class="built_in">print</span>(x)    <span class="comment">// nil</span></span><br></pre></td></tr></table></figure>
<p> <code>Int()</code> 函数的返回类型是<code>Int</code>？，它是一个可选的<code>Int</code>。让我们试着在<code>x</code>上调用一个标准函数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="type">Int</span>(<span class="string">"2014"</span>)</span><br><span class="line"><span class="built_in">print</span>(x.successor()) <span class="comment">// error</span></span><br></pre></td></tr></table></figure>
<p>编译器发出一个错误信号，因为x是可选的，可能是<code>nil</code>。我们必须首先测试<code>x</code>，并确保后继函数在实数上被调用，而不是<code>nil</code>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="type">Int</span>(<span class="string">"2014"</span>)</span><br><span class="line"><span class="keyword">if</span> x != <span class="literal">nil</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">print</span>(x!.successor())    <span class="comment">// 2015</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>请注意，我们必须通过附加感叹号 (!)来解包<code>x</code></strong>。 当我们确定x包含一个值时，我们可以访问它。 否则，我们将得到一个运行时错误。 我们也可对Swift调用进行<strong>可选绑定</strong>，将可选变量转换为非可选变量</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="string">"123"</span>.toInt()</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> y = x</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">print</span>(y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>if语句中的代码只会在<code>x</code>有值时执行，并将其赋值给<code>y</code>。 请注意，我们不需要展开<code>y</code>，它的类型不是可选的，因为我们知道<code>x</code>不是<code>nil</code>。</p>
<p>苹果的Swift教程，阅读关于可选和新特性等更多细节</p>
<p><a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/OptionalChaining.html#//apple_ref/doc/uid/TP40014097-CH21-XID_356" target="_blank" rel="noopener">Optional Chaining</a></p>
<h4 id="字符串插值（拼接）"><a href="#字符串插值（拼接）" class="headerlink" title="字符串插值（拼接）"></a>字符串插值（拼接）</h4><p>在objectivec中，字符串通常用<code>stringWithFormat：</code>方法完成：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NSString</span> *user = @<span class="string">"Gabriel"</span>;</span><br><span class="line">int days = <span class="number">3</span>;</span><br><span class="line"><span class="type">NSString</span> *s = [<span class="type">NSString</span> stringWithFormat:@<span class="string">"posted by %@ (%d days ago)"</span>, user, days];</span><br></pre></td></tr></table></figure>
<p>您也可以使用表达式:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> width = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> height = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> s = <span class="string">"Area for square with sides \(width) and \(height) is \(width*height)"</span></span><br></pre></td></tr></table></figure>
<p>了解更多关于swift的字符串插值和其他新功能, <a href="https://developer.apple.com/library/ios/documentation/swift/conceptual/swift_programming_language/StringsAndCharacters.html#//apple_ref/doc/uid/TP40014097-CH7-XID_418" target="_blank" rel="noopener">请点击这里 </a>。</p>
<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p>Swift中的函数定义与C不同。函数定义如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">someFunction</span><span class="params">(s:String, i: Int)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">&#123;</span><br><span class="line">    ...    <span class="comment">// code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift函数是一流的类型。这意味着您可以将函数分配给变量，将它们作为参数传递给其他函数，或者使它们返回类型：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stringLength</span><span class="params">(s:String)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">countElements</span>(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stringValue</span><span class="params">(s:String)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> x = s.toInt()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">(f:String -&gt; Int, s:String)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> f(s).successor()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f1 = stringLength</span><br><span class="line"><span class="keyword">let</span> f2 = stringValue</span><br><span class="line"></span><br><span class="line">doSomething(f1, <span class="string">"123"</span>)    <span class="comment">// 4</span></span><br><span class="line">doSomething(f2, <span class="string">"123"</span>)    <span class="comment">// 124</span></span><br></pre></td></tr></table></figure>
<p>同样，Swift推断f1和f2（String - &gt; Int）的类型，虽然我们可以明确地定义它们：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f1:<span class="type">String</span> -&gt; <span class="type">Int</span> = stringLength</span><br></pre></td></tr></table></figure>
<p>函数也可以返回其他函数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">compareGreaterThan</span><span class="params">(a: Int, b: Int)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">compareLessThan</span><span class="params">(a: Int, b: Int)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a &lt; b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">comparator</span><span class="params">(greaterThan:Bool)</span></span> -&gt; (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Bool</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> greaterThan</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> compareGreaterThan</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> compareLessThan</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f = comparator(<span class="literal">true</span>)</span><br><span class="line"><span class="built_in">println</span>(f(<span class="number">5</span>, <span class="number">9</span>))</span><br></pre></td></tr></table></figure>
<p>Swift中的函数指南可以在<a href="https://developer.apple.com/library/ios/documentation/swift/conceptual/swift_programming_language/Functions.html#//apple_ref/doc/uid/TP40014097-CH10-XID_243" target="_blank" rel="noopener">这里</a>找到。</p>
<h4 id="枚举（Enumerations）"><a href="#枚举（Enumerations）" class="headerlink" title="枚举（Enumerations）"></a>枚举（Enumerations）</h4><p>Swift中的枚举比objectivec中的枚举强大得多。 作为Swift的结构体(structs)，他们可以有方法，也可以传值</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">MobileDevice</span> : <span class="title">String</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">case</span> iPhone = <span class="string">"iPhone"</span>, <span class="type">Android</span> = <span class="string">"Android"</span>, <span class="type">WP8</span> = <span class="string">"Windows Phone8"</span>, <span class="type">BB</span> = <span class="string">"BlackBerry"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">name</span><span class="params">()</span></span> -&gt; <span class="type">String</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.toRaw()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> m = <span class="type">MobileDevice</span>.<span class="type">Android</span></span><br><span class="line"><span class="built_in">print</span>(m.name())    <span class="comment">// "Android"</span></span><br></pre></td></tr></table></figure>
<p>与objectivec不同，swift枚举可以为每个成员赋值字符串(Strings)，字符(characters)或浮点数(floats)，除了整数(integers)。<code>toraw()</code>方法很方便的返回分配给每个成员的值。</p>
<p>枚举也可以参数化:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Location</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Address</span>(street:<span class="type">String</span>, city:<span class="type">String</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">LatLon</span>(lat:<span class="type">Float</span>, lon:<span class="type">Float</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">description</span><span class="params">()</span></span> -&gt; <span class="type">String</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span></span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Address</span>(street, city):</span><br><span class="line">            <span class="keyword">return</span> street + <span class="string">", "</span> + city</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">LatLon</span>(lat, lon):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"(\(lat), \(lon))"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> loc1 = <span class="type">Location</span>.<span class="type">Address</span>(street: <span class="string">"2070 Fell St"</span>, city: <span class="string">"San Francisco"</span>)</span><br><span class="line"><span class="keyword">let</span> loc2 = <span class="type">Location</span>.<span class="type">LatLon</span>(lat: <span class="number">23.117</span>, lon: <span class="number">45.899</span>)</span><br><span class="line"><span class="built_in">print</span>(loc1.description())        <span class="comment">// "2070 Fell St, San Francisco"</span></span><br><span class="line"><span class="built_in">print</span>(loc2.description())        <span class="comment">// "(23.117, 45.988)"</span></span><br></pre></td></tr></table></figure>
<p>更多关于枚举可用的信息 <a href="https://developer.apple.com/library/ios/documentation/swift/conceptual/swift_programming_language/Enumerations.html#//apple_ref/doc/uid/TP40014097-CH12-XID_223" target="_blank" rel="noopener">在这里 </a>。</p>
<h4 id="元组（Tuples）"><a href="#元组（Tuples）" class="headerlink" title="元组（Tuples）"></a>元组（Tuples）</h4><p>元组将多个值组合为一个复合值。元组中的值可以是任何类型，不必是彼此相同的类型。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = (<span class="string">"Gabriel"</span>, <span class="string">"Kirkpatrick"</span>)</span><br><span class="line"><span class="built_in">print</span>(person.<span class="number">0</span>) <span class="comment">// Gabriel</span></span><br></pre></td></tr></table></figure>
<p>你也可以命名单个的元组元素：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = (first: <span class="string">"Gabriel"</span>, last: <span class="string">"Kirkpatrick"</span>)</span><br><span class="line"><span class="built_in">print</span>(person.first)</span><br></pre></td></tr></table></figure>
<p>元组对于需要返回多个值的函数返回类型非常方便：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">intDivision</span><span class="params">(a: Int, b: Int)</span></span> -&gt; (quotient: <span class="type">Int</span>, remainder: <span class="type">Int</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (a/b, a%b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(intDivision(<span class="number">11</span>, <span class="number">3</span>))    <span class="comment">// (3, 2)</span></span><br><span class="line"><span class="keyword">let</span> result = intDivision(<span class="number">15</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(result.remainder)    <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>不像objectivec，swift支持switch语句中的模式(pattern)匹配：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> complex = (<span class="number">2.0</span>, <span class="number">1.1</span>)    <span class="comment">// real and imaginary parts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> complex</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> (<span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Number is zero"</span>)</span><br><span class="line">    <span class="keyword">case</span> (<span class="number">_</span>, <span class="number">0</span>):</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Number is real"</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Number is imaginary"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在第二种情况下，我们不关心数字的实际部分，所以我们使用<code>_</code>来匹配任何东西。您还可以检查每种情况下的附加条件。为此，我们需要将模式值绑定到常量：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> complex = (<span class="number">2.0</span>, <span class="number">1.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> complex</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> (<span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Number is zero"</span>)</span><br><span class="line">    <span class="keyword">case</span> (<span class="keyword">let</span> a, <span class="number">0</span>) <span class="keyword">where</span> a &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Number is real and positive"</span>)</span><br><span class="line">    <span class="keyword">case</span> (<span class="keyword">let</span> a, <span class="number">0</span>) <span class="keyword">where</span> a &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Number is real and negative"</span>)</span><br><span class="line">    <span class="keyword">case</span> (<span class="number">0</span>, <span class="keyword">let</span> b) <span class="keyword">where</span> b != <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Number has only imaginary part"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> (a, b):</span><br><span class="line">        <span class="built_in">println</span>(<span class="string">"Number is imaginary with distance \(a*a + b*b)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意我们只需要绑定我们要在比较或case语句中使用的值。阅读更多关于元组，<a href="https://developer.apple.com/library/prerelease/mac/documentation/Swift/Conceptual/Swift_Programming_Language/TheBasics.html#//apple_ref/doc/uid/TP40014097-CH5-XID_483" target="_blank" rel="noopener">点击这里</a>。</p>
<h4 id="类-Classes-和结构-Structures"><a href="#类-Classes-和结构-Structures" class="headerlink" title="类(Classes)和结构(Structures)"></a>类(Classes)和结构(Structures)</h4><p>与objectivec不同，swift不需要为自定义的类和结构创建单独的接口和实现文件。当你学习Swift，你将学会在一个单独的文件中定义一个类或者一个结构体，并且这个类或者结构体的外部接口被自动地提供给其他代码使用。</p>
<h3 id="定义类（Classes）"><a href="#定义类（Classes）" class="headerlink" title="定义类（Classes）"></a>定义类（Classes）</h3><p>类定义很简单:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bottle</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> volume: <span class="type">Int</span> = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">description</span><span class="params">()</span></span> -&gt; <span class="type">String</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"This bottle has \(volume) ml"</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> b = <span class="type">Bottle</span>()</span><br><span class="line"><span class="built_in">print</span>(b.description())</span><br></pre></td></tr></table></figure>
<p>正如你所看到的，声明(header)和实现(implementation)在同一个文件中。swift不再使用头文件和实现文件。让我们给我们的例子添加一个标签：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bottle</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> volume: <span class="type">Int</span> = <span class="number">1000</span></span><br><span class="line">   <span class="keyword">var</span> label:<span class="type">String</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">description</span><span class="params">()</span></span> -&gt; <span class="type">String</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"This bottle of \(label) has \(volume) ml"</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译器会抱怨,因为是一个可选的变量标签和瓶时不会持有一个值实例化。 我们需要添加一个初始化程序:</p>
<p>编译器会抱怨，因为标签是一个非可选的变量，并且当一个Bottle被实例化时不会保存一个值。我们需要添加一个初始化程序(initializer)：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bottle</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> volume: <span class="type">Int</span> = <span class="number">1000</span></span><br><span class="line">   <span class="keyword">var</span> label:<span class="type">String</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">init</span>(label:<span class="type">String</span>)</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">self</span>.label = label</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">description</span><span class="params">()</span></span> -&gt; <span class="type">String</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"This bottle of \(label) has \(volume) ml"</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者，我们可以使用可选类型的属性，它不会被初始化。在下面的例子中，我们将卷设为一个可选的整数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bottle</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> volume: <span class="type">Int</span>?</span><br><span class="line">   <span class="keyword">var</span> label:<span class="type">String</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">init</span>(label:<span class="type">String</span>)</span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">self</span>.label = label</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">description</span><span class="params">()</span></span> -&gt; <span class="type">String</span></span><br><span class="line">   &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.volume != <span class="literal">nil</span></span><br><span class="line">        &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="string">"This bottle of \(label) has \(volume!) ml"</span></span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">           &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="string">"A bootle of \(label)"</span></span><br><span class="line">           &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="结构-Structures"><a href="#结构-Structures" class="headerlink" title="结构(Structures)"></a>结构(Structures)</h3><p>Swift语言也有 <code>结构体</code>,但是比objective - c更加灵活。 下面的代码教程定义了一个结构体：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Seat</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> row: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> letter:<span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span> (row: <span class="type">Int</span>, letter:<span class="type">String</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">self</span>.row = row</span><br><span class="line">        <span class="keyword">self</span>.letter = letter</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">description</span><span class="params">()</span></span> -&gt; <span class="type">String</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"\(row)-\(letter)"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>像swift中的类，结构可以有方法，属性，初始值设定项，并符合协议。类和结构之间的主要区别是类是通过引用传递的，而结构则是通过值传递的。</p>
<p>这个例子演示了通过引用传递类：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b = <span class="type">Bottle</span>()</span><br><span class="line"><span class="built_in">print</span>(b.description())    <span class="comment">// "b" bottle has 1000 ml</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b2 = b</span><br><span class="line">b.volume = <span class="number">750</span></span><br><span class="line"><span class="built_in">print</span>(b2.description())    <span class="comment">// "b" and "b2" bottles have 750 ml</span></span><br></pre></td></tr></table></figure>
<p>如果我们用struct来尝试类似的情况，你会注意到变量是按值传递的：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="type">Seat</span>(row: <span class="number">14</span>, letter:<span class="string">"A"</span>)</span><br><span class="line"><span class="keyword">var</span> s2 = s1</span><br><span class="line">s1.letter = <span class="string">"B"</span></span><br><span class="line"><span class="built_in">print</span>(s1.description())    <span class="comment">// 14-B</span></span><br><span class="line"><span class="built_in">print</span>(s2.description())    <span class="comment">// 14-A</span></span><br></pre></td></tr></table></figure>
<p> 什么时候应该使用struct，什么时候应该使用class？</p>
<p>​       就像在objectivec和c中一样，当你需要对几个值进行分组时，使用结构体，并期望它们被复制而不是被引用。 例如，复数，，2d或3d点或RGB颜色。</p>
<p>​       一个类的实例传统上被称为对象。 然而，Swift类和结构在功能上比其他语言更接近，而且许多功能可以应用于类或结构类型的实例。 正因为如此，在Swift引用中使用的更一般的术语是实例(instance)，它适用于这两者中的任何一个。</p>
<h3 id="属性-Properties"><a href="#属性-Properties" class="headerlink" title="属性(Properties)"></a>属性(Properties)</h3><p>正如我们前面看到的，Swift中的属性在类或结构定义中用<code>var</code>关键字声明。 我们也可以用<code>let</code>语句声明常量。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FixedPointNumber</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> digits: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">let</span> decimals: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> n = <span class="type">FixedPointNumber</span>(digits: <span class="number">12345</span>, decimals: <span class="number">2</span>)</span><br><span class="line">n.digits = <span class="number">4567</span>    <span class="comment">// ok</span></span><br><span class="line">n.decimals = <span class="number">3</span>     <span class="comment">// error, decimals is a constant</span></span><br></pre></td></tr></table></figure>
<p>另外请记住，强类型属性是强引用的，除非用weak关键字作为前缀。 但是，有一些weak的非可选属性，所以请阅读苹果Swift指南中的<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/AutomaticReferenceCounting.html#//apple_ref/doc/uid/TP40014097-CH20-XID_88" target="_blank" rel="noopener">自动引用计数章节</a>。</p>
<h3 id="计算属性-Computed-Properties"><a href="#计算属性-Computed-Properties" class="headerlink" title="计算属性(Computed Properties)"></a>计算属性(Computed Properties)</h3><p>计算属性实际上并不存储一个值。 相反，它们提供了一个getter和一个可选的setter来间接检索和设置其他属性和值。</p>
<p>以下代码提供了一个计算<code>sign</code>值的示例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Sign</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Positive</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Negative</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeNumber</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> number:<span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> sign:<span class="type">Sign</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> number &lt; <span class="number">0</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="type">Sign</span>.<span class="type">Negative</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="type">Sign</span>.<span class="type">Positive</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">set</span> (newSign)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (newSign == <span class="type">Sign</span>.<span class="type">Negative</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">self</span>.number = -<span class="built_in">abs</span>(<span class="keyword">self</span>.number)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">self</span>.number = <span class="built_in">abs</span>(<span class="keyword">self</span>.number)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们也可以通过执行一个getter来定义只读属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeNumber</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> number:<span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> isEven:<span class="type">Bool</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> number % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在objectivec中，属性通常由一个实例变量持有，由编译器明确地声明或自动创建。 在Swift中，另一方面，一个属性没有相应的实例变量。 也就是说，属性的后备存储不能直接访问。 假设我们在objectivec中有这个</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .h</span></span><br><span class="line">@interface <span class="type">OnlyInitialString</span> : <span class="type">NSObject</span></span><br><span class="line"></span><br><span class="line">@property(strong) <span class="type">NSString</span> *string;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"><span class="comment">// .m</span></span><br><span class="line"></span><br><span class="line">@implementation <span class="type">OnlyInitialString</span></span><br><span class="line"></span><br><span class="line">- (void)setString:(<span class="type">NSString</span> *newString)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (newString.length &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        _string = [newString substringToIndex:<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        _string = @<span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>因为在Swift中，计算属性没有后备存储，所以我们需要这样做：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OnlyInitialString</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> initial:<span class="type">String</span> = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> string:<span class="type">String</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">set</span> (newString)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">countElements</span>(newString) &gt; <span class="number">0</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">self</span>.initial = newString.substringToIndex(<span class="built_in">advance</span>(newString.startIndex, <span class="number">1</span>))</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">self</span>.initial = <span class="string">""</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span>.initial</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于属性更详细地解释 <a href="https://developer.apple.com/library/ios/documentation/swift/conceptual/swift_programming_language/Properties.html#//apple_ref/doc/uid/TP40014097-CH14-XID_368" target="_blank" rel="noopener">在这里</a></p>
</div><div class="tags"><a href="/tags/Swift/">Swift</a></div><div class="post-nav"><a class="pre" href="/2017/02/03/Mac Nginx服务器搭建/">Mac Nginx服务器搭建</a><a class="next" href="/2016/12/28/Mac图片压缩_shell/">图片无损压缩工具</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zNDM5OC8xMDkzNQ"><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Google Search"/><input type="hidden" name="sitesearch" value="http://huluo666.cn"/></form></div><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="百度搜索"/><input type="hidden" name="si" value="http://huluo666.cn"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="本地搜索" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AppleScrips/">AppleScrips</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac/">Mac</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/">Swift</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Xcode/">Xcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/devtool/">devtool</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/devtools/">devtools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">essay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/macapp/">macapp</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/read/">read</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/resume/">resume</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/其它/">其它</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/快捷键/">快捷键</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技巧/">技巧</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/正则/">正则</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/直播/">直播</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编辑器/">编辑器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/Xcode/" style="font-size: 15px;">Xcode</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/App上传/" style="font-size: 15px;">App上传</a> <a href="/tags/AppleScrips/" style="font-size: 15px;">AppleScrips</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/AutoLayout/" style="font-size: 15px;">AutoLayout</a> <a href="/tags/CocoaPods/" style="font-size: 15px;">CocoaPods</a> <a href="/tags/直播/" style="font-size: 15px;">直播</a> <a href="/tags/其它/" style="font-size: 15px;">其它</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Node-js/" style="font-size: 15px;">Node.js</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/React-Native/" style="font-size: 15px;">React Native</a> <a href="/tags/ios/" style="font-size: 15px;">ios</a> <a href="/tags/runtime-小书匠/" style="font-size: 15px;">runtime,小书匠</a> <a href="/tags/新建-模板-小书匠/" style="font-size: 15px;">新建,模板,小书匠</a> <a href="/tags/Runtime-模板-小书匠/" style="font-size: 15px;">Runtime,模板,小书匠</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/测试/" style="font-size: 15px;">测试</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/iOS-动画/" style="font-size: 15px;">iOS,动画</a> <a href="/tags/FFMpeg/" style="font-size: 15px;">FFMpeg</a> <a href="/tags/编程规范/" style="font-size: 15px;">编程规范</a> <a href="/tags/代码优化/" style="font-size: 15px;">代码优化</a> <a href="/tags/正则/" style="font-size: 15px;">正则</a> <a href="/tags/警告/" style="font-size: 15px;">警告</a> <a href="/tags/iOS-动画-绘图/" style="font-size: 15px;">iOS,动画,绘图</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/技巧/" style="font-size: 15px;">技巧</a> <a href="/tags/node-js/" style="font-size: 15px;">node.js</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/极客导航/" style="font-size: 15px;">极客导航</a> <a href="/tags/自定义View/" style="font-size: 15px;">自定义View</a> <a href="/tags/HUD/" style="font-size: 15px;">HUD</a> <a href="/tags/搜索框/" style="font-size: 15px;">搜索框</a> <a href="/tags/searchBar/" style="font-size: 15px;">searchBar</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/02/React-Native开发环境搭建-Mac/">React Native开发环境搭建-Mac</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/30/Runtime实现自定义description打印中文/">Runtime实现自定义description打印中文</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/30/Xcode格式化代码/">Xcode格式化代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/29/优雅的使用Sublime-Text3/">优雅的使用Sublime-Text3</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/27/iOS内存泄漏/">iOS内存泄漏</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/27/iOS网络请求NSURLSession/">iOS网络请求NSURLSession</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/27/iOS常用第三分库源码分析/">iOS常用第三分库源码分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/26/iOS多线程/">iOS多线程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/23/iOS中Class相关方法区别/">iOS中Class相关方法区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/22/KVO原理及实现/">KVO原理及实现</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.itechzero.com/" title="ITechzero" target="_blank">ITechzero</a><ul></ul><a href="https://github.com/trending?l=objective-c" title="GithubTrending" target="_blank">GithubTrending</a><ul></ul><a href="http://www.ctolib.com/" title="CTOLib" target="_blank">CTOLib</a><ul></ul><a href="http://www.iosappx.com/" title="苹果DEVUnion" target="_blank">苹果DEVUnion</a><ul></ul><a href="http://www.jianshu.com/users/97e4c0e7528e" title="木棠" target="_blank">木棠</a><ul></ul><a href="http://www.jianshu.com/users/a47bd3610273" title="LeapDing" target="_blank">LeapDing</a></div><div class="widget"><div class="widget-title"> Github名片</div><div class="github-card" data-github="huluo666" data-width="220" data-height="120" data-theme="medium"> </div><script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Kimi DevBlog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>